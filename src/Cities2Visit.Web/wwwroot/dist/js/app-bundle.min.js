!function(){function t(t){var n=this;n.cities=[],n.$onInit=function(){n.setup()},n.setup=function(){n.newCity={},n.newCity.attractions=[],n.showAddCity=!1,n.listCities(),n.countVisitedCities()},n.listCities=function(){t.getCities().then(function(t){n.cities=t}).catch(function(t){})},n.addCity=function(i){t.addCity(i).then(function(t){n.setup()}).catch(function(t){})},n.countVisitedCities=function(){t.countVisitedCities().then(function(t){n.visitedCount=t}).catch(function(t){})},n.setVisitedStatus=function(i){i.visited=!i.visited,t.editCity(i.city,i).then(function(t){n.setup()}).catch(function(t){})}}angular.module("app").component("citiesComponent",{templateUrl:"/app/components/cities.component.html",controllerAs:"model",controller:["citiesService",t]})}(),function(){angular.module("app").factory("citiesService",["$http","$q",function(t,n){function i(){return t.get(config.baseUri+"cities").then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function e(i){return t.post(config.baseUri+"cities/",i).then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function s(i,e){return t.put(config.baseUri+"cities/"+i,e).then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}function c(){return t.get(config.baseUri+"cities/visited").then(function(t){return t.data}).catch(function(t){return n.reject("Response status: "+t.status+" ("+t.statusText+")<br /> "+t.data.message)})}return{getCities:i,addCity:e,editCity:s,countVisitedCities:c}}])}();